<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <meta name="generator" content="Jekyll">

  <title>Digital Library Visualization</title>

  <link rel="stylesheet" href="/css/main.css">
  
  <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed" /> <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Digital Library Visualization | θεόφιλος Journey</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Digital Library Visualization" />
<meta name="author" content="Jorge Murillo" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Previous Home   Library Graphic Representation θεόφιλος Journey  " />
<meta property="og:description" content="Previous Home   Library Graphic Representation θεόφιλος Journey  " />
<link rel="canonical" href="http://0.0.0.0:7000/C-library-visualization" />
<meta property="og:url" content="http://0.0.0.0:7000/C-library-visualization" />
<meta property="og:site_name" content="θεόφιλος Journey" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-11-28T00:00:00+00:00" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:7000/C-library-visualization"},"@type":"BlogPosting","url":"http://0.0.0.0:7000/C-library-visualization","headline":"Digital Library Visualization","dateModified":"2020-11-28T00:00:00+00:00","datePublished":"2020-11-28T00:00:00+00:00","author":{"@type":"Person","name":"Jorge Murillo"},"description":"Previous Home   Library Graphic Representation θεόφιλος Journey  ","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
  <div id="wrapper">
    <header>
  <div>
    <a href="/">
    
    <h1>jorge@home:~$</h1>
    </a>
    <div class="header-links">
      <a href="/archive"><h2 class="header-link">Archive</h2></a>
<a href="/about"><h2 class="header-link">About</h2></a>
<a href="https://github.com/murillocjr/theophilusnlp"><h2 class="header-link">Source Code</h2></a>

    </div>
  </div>
</header>
    <div class="container">
      <section id="main_content">
        <article>
  <h2>Digital Library Visualization</h2>
  <time datetime="2020-11-28T00:00:00+00:00" class="by-line">28 Nov 2020</time>
  <table>
  <thead>
    <tr>
      <th style="text-align: left">Previous</th>
      <th style="text-align: left">Home</th>
      <th style="text-align: left"> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><a href="B-LibGraph">Library Graphic Representation</a></td>
      <td style="text-align: left"><a href="A-θεόφιλος-Journey">θεόφιλος Journey</a></td>
      <td style="text-align: left"> </td>
    </tr>
  </tbody>
</table>

<html>
<meta charset="utf-8" />
<head>
    <link rel="stylesheet" type="text/css" href="https://murillocjr.github.io/murillocjr/css/dependency.css" />
    <link rel="stylesheet" type="text/css" href="https://murillocjr.github.io/murillocjr/components/sidr/stylesheets/jquery.sidr.dark.css" />
    <link rel="stylesheet" type="text/css" href="https://murillocjr.github.io/murillocjr/components/editor/editor.css" />
</head>
<body>

<!-- A lot of Javascript here :) -->
<script type="text/javascript" src="https://murillocjr.github.io/murillocjr/components/jquery/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="https://murillocjr.github.io/murillocjr/components/underscore/underscore-min.js"></script>
<script type="text/javascript" src="https://murillocjr.github.io/murillocjr/components/d3/d3.js"></script>

<!-- ================================================= -->
<!-- ===========ACTUAL HTML           ================ -->
<!-- ================================================= -->

<form id="form">
    <!-- <label><input type="range" name="circle_size" min="1" max="50" value="15"/> Circle size</label><br> -->
  
    <label><input type="range" name="link_limit" min="1" max="100" value="100" /> Link Limit</label><br /><label><input type="range" name="link_pow" min="1" max="20" value="3" /> Link Power</label><br />
    <!-- <label><input type="range" name="charge_multiplier" min="1" max="500" value="1"/> Charge multiplier</label><br> -->
    <!-- <label><input type="range" name="link_strength" min="0.1" max="100" value="0"/> Link strength</label><br> -->
    <label><input type="checkbox" name="show_texts_near_circles" id="show_texts_near_circles" checked="" /> Show names</label><br />
    <input id="search_input" placeholder="Type regexp to filter nodes" style="width:100%;" /><br />
</form>

<!-- Add editor logic with button and everything else -->
<script type="text/javascript" src="https://murillocjr.github.io/murillocjr/components/sidr/jquery.sidr.js"></script>
<script type="text/javascript" src="https://murillocjr.github.io/murillocjr/components/ace/ace.js"></script>
<script type="text/javascript" src="https://murillocjr.github.io/murillocjr/components/editor/editor.js"></script>
<a id="simple-menu" class="editor-button" href="#sidr">Live editor</a>

<div id="chart" style="background-color:powderblue;height: 600px;">
    <!-- Here the SVG will be placed-->

</div>

<script type="text/javascript" src="https://murillocjr.github.io/murillocjr/origin.js"></script>
<script src="https://murillocjr.github.io/murillocjr/components/depvis/depvis-graph-actions-select.js"></script>
<script src="https://murillocjr.github.io/murillocjr/components/depvis/depvis-parse.js"></script>
<script src="https://murillocjr.github.io/murillocjr/components/depvis/depvis-config.js"></script>
<script src="https://murillocjr.github.io/murillocjr/components/depvis/depvis-visualizer.js"></script>
<script>

    //  ===================================================
    //  =============== CONFIGURABLE PARAMS  ==============
    //  ===================================================

    let config = dvconfig.create();

    const dvgraph = objcdv.parse_dependencies_graph(dependencies);
    const d3graph = dvgraph.d3jsGraph();

    var w = window,
        d = document,
        e = d.documentElement,
        g = d.getElementsByTagName('body')[0],
        x = w.innerWidth || e.clientWidth || g.clientWidth,
        y = w.innerHeight || e.clientHeight || g.clientHeight;

    //  ===================================================
    //  =============== http://d3js.org/ Magic ===========
    //  ===================================================

    const container = d3.select("#chart").append("svg")
        .attr("width", x)
        .attr("height", y)
        .style("overflow", "hidden");

    const svg = container.append('g');
    const actions = graph_actions.create(svg, dvgraph);
    let visualizer = dvvisualizer.create(svg, config, d3graph);
    visualizer.initialize();
    visualizer.setupZoom(container);


    //  ===================================================
    //  ===============  NODES SETUP     ==================
    //  ===================================================


    // Handling pressing
    visualizer.objectNodes
        .on("click", d => {
            if (d3.event.defaultPrevented) { return }
            actions.selectNodesStartingFromNode(d, config.max_distance);
            visualizer.reapply_charge_and_links()
        })
        .on("contextmenu", d => {
            if (d3.event.defaultPrevented) { return }
            // Don't actually show context menu
            d3.event.preventDefault();

            actions.selectNodesStartingFromNode(d, config.max_distance);
            visualizer.reapply_charge_and_links()
        });


    /*
     Window resize update
     */
    w.onresize = () => {
        x = w.innerWidth || e.clientWidth || g.clientWidth;
        y = w.innerHeight || e.clientHeight || g.clientHeight;

        container.attr("width", Math.ceil(x)).attr("height", Math.ceil(y));
        visualizer.updateCenter(x / 2, y / 2);
    };


</script>

<script>
    //  ===================================================
    //  =============== INPUTS HANDLING      ==============
    //  ===================================================
    d3.selectAll("input").on("change", function change() {

        if (this.name === "circle_size") {
            config.default_circle_radius = parseInt(this.value);
            visualizer.updateRadiuses(parseInt(this.value));
        }
        if (this.name === "link_limit") {
            config.max_distance = parseInt(this.value) / 100;
            actions.selectNodesStartingFromSelectedNode(parseInt(this.value) / 100);
            visualizer.reapply_links_settings();
        }
        if (this.name === "link_pow") {
            config.link_pow = parseInt(this.value);
            visualizer.reapply_links_settings();
        }

        if (this.name === "charge_multiplier") {
            let chargeMultiplier = parseInt(this.value);
            visualizer.reapply_charge(chargeMultiplier)
        }

        if (this.name === "link_strength") {
            let linkStrength = parseInt(this.value) / 10;
            visualizer.reapply_links_strength(linkStrength)
        }

        if (this.name === "show_texts_near_circles") {
            visualizer.updateTextVisibility(this.checked)
        }

    });
</script>


<script>
    //  ===================================================
    //  =============== LIVE FILTERING      ==============
    //  ===================================================

    function live_filter_graph(regexp, classname, invert) {
        classname = setDefaultValue(classname, "filtered");
        invert = setDefaultValue(invert, false);

        const re = new RegExp(regexp, "i");

        actions.svg.selectAll('.node, .structNode')
                    .each(function (node) {
                         let filtered = !node.title.match(re);
                         if (!filtered) {
                            actions.selectNodesStartingFromNode(node, config.max_distance);
                            node.filtered = filtered;
                         };
                        // filtered = invert ? !filtered : filtered;
                        // node.filtered = filtered;
                        // node.filtered = false;
                    }).transition();


        // svg.selectAll('.node')
        //     .classed(classname, l => {
        //         let filtered = !node.name.match(re);
        //         filtered = invert ? !filtered : filtered;
        //         return filtered;
        //     })
        //     .attr("filtered", l => {
        //         let filtered = !(l.sourceNode.name.match(re) && l.targetNode.name.match(re));
        //         filtered = invert ? !filtered : filtered;
        //         return filtered ? "" : "url(#default)"
        //     })
        //     .transition()

        svg.selectAll('.link')
            .classed(classname, l => {
                let filtered = !(l.sourceNode.filtered && l.targetNode.filtered);
                filtered = invert ? !filtered : filtered;
                return filtered;
            })
            .attr("marker-end", l => {
                let filtered = !(l.sourceNode.filtered && l.targetNode.filtered);
                filtered = invert ? !filtered : filtered;
                return filtered ? "" : "url(#default)"
            })
            .transition()
    }


    d3.select("#search_input").on("input", function () {
        console.log("Input changed to" + this.value);
        actions.deselect_selected_node();

        if (this.value && this.value.length) {
            live_filter_graph(this.value, "filtered");
        }
        visualizer.reapply_charge_and_links();
    });

    d.addEventListener("DOMContentLoaded", function(){
       
        setTimeout(() => {  visualizer.reapply_links_strength(0.1) }, 2000);
        visualizer.updateTextVisibility(d.getElementById("show_texts_near_circles").checked);

    });
        
</script>
</body>
</html>

</article>
      </section>
    </div>
  </div>

   <footer>
    <a href="http://murillocjr.github.io/">
    <span>
        <b>Jorge Murillo</b>
    </span>
    
    <span>© 2020</span>
    </a>
</footer>


  
    <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-49256786-5', 'auto');
  ga('send', 'pageview');
</script>
  
</body>

</html>